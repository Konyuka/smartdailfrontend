{"remainingRequest":"C:\\Users\\user\\Desktop\\TAILTASK\\USER\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\user\\Desktop\\TAILTASK\\USER\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\user\\Desktop\\TAILTASK\\USER\\src\\App.vue","mtime":1608125642703},{"path":"C:\\Users\\user\\Desktop\\TAILTASK\\USER\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\TAILTASK\\USER\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\user\\Desktop\\TAILTASK\\USER\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\TAILTASK\\USER\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJwoKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXBwJywKICBjcmVhdGVkICgpIHsKICAgIHRoaXMud2ViU29ja2V0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIHdlYlNvY2tldCgpIHsKICAgICAgbGV0IGNvbm5lY3Rpb24gPSBuZXcgV2ViU29ja2V0KCJ3czovLyIgKyB0aGlzLiRzb2NrZXQgKyIvYXBpL3YxL3dzIikKCiAgICAgIGNvbnNvbGUubG9nKCJDb25uZWN0aW5nIHRvIHRoZSB3ZWJzb2NrZXQgc2VydmVyLi4uIikKCiAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpID09IG51bGwgfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Bob25lJykgPT0gbnVsbCkgewogICAgICAgIGNvbnNvbGUubG9nKCJVc2VybmFtZSBvciBwaG9uZSBzdGlsbCBudWxsLHdlYnNvY2tldCBjb25uZWN0aW9uIGZhaWxlZCwgbm8gdXNlciIpOwogICAgICAgIHN0b3JlLmRpc3BhdGNoKCJ3ZWJzb2NrZXQiLCAnT0ZGJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25uZWN0aW9uLm9ub3BlbiA9ICgpID0+IHsKICAgICAgICAKICAgICAgICAgIGNvbm5lY3Rpb24uc2VuZChKU09OLnN0cmluZ2lmeSh7ICJ1c2VybmFtZSI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJyksICJwaG9uZSI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwaG9uZScpICwiY2FtcGFpZ24iOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FtcGFpZ24nKX0pKQogICAgICAgICAgY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoICAgIHsgInVzZXJuYW1lIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSwgInBob25lIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Bob25lJykgLCJjYW1wYWlnbiI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYW1wYWlnbicpfSkpCiAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgid2Vic29ja2V0IiwgJ09OJyk7CiAgICAgICAgICBjb25zb2xlLmxvZygiY29ubmVjdGVkIHN1Y2Nlc3NmdWxseSIpCiAgICAgICAgICAKICAgICAgfTsKICAgICAgCiAgICAgIGNvbm5lY3Rpb24ub25tZXNzYWdlID0gKG1lc3NhZ2UpID0+IHsKICAgICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShtZXNzYWdlLmRhdGEpOwogICAgICAgICAgc3RvcmUuZGlzcGF0Y2goIndlYnNvY2tldCIsICdPTicpOwogICAgICAgICAgc3RvcmUuZGlzcGF0Y2goImZyb21XZWJzb2NrZXQiLCBkYXRhKTsKICAgICAgfTsKCiAgICAgIGNvbm5lY3Rpb24ub25jbG9zZSA9ICgpID0+IHsgLy9ldmVudAogICAgICAgICAgY29uc29sZS5sb2coIlNvY2tldCBjbG9zZWQ6IE9OIENMT1NFIik7IC8vLCBldmVudAogICAgICAgICAgdGhpcy4kcGFyZW50LnNob3djYW1wYWlnbk1vZGFsID0gdHJ1ZQogICAgICAgICAgc3RvcmUuZGlzcGF0Y2goIndlYnNvY2tldCIsICdPRkYnKTsKICAgICAgfTsKCiAgICAgIGNvbm5lY3Rpb24ub25lcnJvciA9ICgpID0+IHsgLy9ldnQKICAgICAgICAgIGNvbnNvbGUubG9nKCJTb2NrZXQgY2xvc2VkIDogT04gRVJST1IiKTsKICAgICAgfTsKICAgIH0sCiAgfSwKICBjb21wdXRlZDogewogICAgc29ja2V0ICgpIHsKICAgICAgICByZXR1cm4gIHN0b3JlLnN0YXRlLnNvY2tldAogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBzb2NrZXQobmV3VmFsdWUpewogICAgICBpZihuZXdWYWx1ZSA9PSAnT0ZGJyl7CiAgICAgICAgY29uc29sZS5sb2coJ1NvY2tldCBvZmYhJykKICAgICAgICB0aGlzLndlYlNvY2tldCgpCiAgICAgICAgdHJ1ZQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;AAOA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nimport store from '@/store'\n\n\nexport default {\n  name: 'App',\n  created () {\n    this.webSocket()\n  },\n  methods: {\n    webSocket() {\n      let connection = new WebSocket(\"ws://\" + this.$socket +\"/api/v1/ws\")\n\n      console.log(\"Connecting to the websocket server...\")\n\n      if (localStorage.getItem('user') == null || localStorage.getItem('phone') == null) {\n        console.log(\"Username or phone still null,websocket connection failed, no user\");\n        store.dispatch(\"websocket\", 'OFF');\n        return;\n      }\n\n      connection.onopen = () => {\n        \n          connection.send(JSON.stringify({ \"username\": localStorage.getItem('user'), \"phone\": localStorage.getItem('phone') ,\"campaign\": localStorage.getItem('campaign')}))\n          console.log(JSON.stringify(    { \"username\": localStorage.getItem('user'), \"phone\": localStorage.getItem('phone') ,\"campaign\": localStorage.getItem('campaign')}))\n          store.dispatch(\"websocket\", 'ON');\n          console.log(\"connected successfully\")\n          \n      };\n      \n      connection.onmessage = (message) => {\n          let data = JSON.parse(message.data);\n          store.dispatch(\"websocket\", 'ON');\n          store.dispatch(\"fromWebsocket\", data);\n      };\n\n      connection.onclose = () => { //event\n          console.log(\"Socket closed: ON CLOSE\"); //, event\n          this.$parent.showcampaignModal = true\n          store.dispatch(\"websocket\", 'OFF');\n      };\n\n      connection.onerror = () => { //evt\n          console.log(\"Socket closed : ON ERROR\");\n      };\n    },\n  },\n  computed: {\n    socket () {\n        return  store.state.socket\n    },\n  },\n  watch: {\n    socket(newValue){\n      if(newValue == 'OFF'){\n        console.log('Socket off!')\n        this.webSocket()\n        true\n      }\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n"]}]}