{"remainingRequest":"C:\\Users\\user\\Desktop\\TAILTASK\\user\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\user\\Desktop\\TAILTASK\\user\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\user\\Desktop\\TAILTASK\\user\\src\\App.vue","mtime":1607693995444},{"path":"C:\\Users\\user\\Desktop\\TAILTASK\\user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\TAILTASK\\user\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\user\\Desktop\\TAILTASK\\user\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\user\\Desktop\\TAILTASK\\user\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBcHAnLAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy53ZWJTb2NrZXQoKQogIH0sCiAgbWV0aG9kczogewogICAgd2ViU29ja2V0KCkgewogICAgICBsZXQgY29ubmVjdGlvbiA9IG5ldyBXZWJTb2NrZXQoIndzOi8vIiArIHRoaXMuJHNvY2tldCArIi9hcGkvdjEvd3MiKQoKICAgICAgY29uc29sZS5sb2coIkNvbm5lY3RpbmcgdG8gdGhlIHdlYnNvY2tldCBzZXJ2ZXIuLi4iKQoKICAgICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykgPT0gbnVsbCB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGhvbmUnKSA9PSBudWxsKSB7CiAgICAgICAgY29uc29sZS5sb2coIlVzZXJuYW1lIG9yIHBob25lIHN0aWxsIG51bGwsd2Vic29ja2V0IGNvbm5lY3Rpb24gZmFpbGVkLCBubyB1c2VyIik7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goIndlYnNvY2tldCIsICdPRkYnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbm5lY3Rpb24ub25vcGVuID0gKCkgPT4gewogICAgICAgIAogICAgICAgICAgY29ubmVjdGlvbi5zZW5kKEpTT04uc3RyaW5naWZ5KHsgInVzZXJuYW1lIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSwgInBob25lIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Bob25lJykgLCJjYW1wYWlnbiI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjYW1wYWlnbicpfSkpCiAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSggICAgeyAidXNlcm5hbWUiOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpLCAicGhvbmUiOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGhvbmUnKSAsImNhbXBhaWduIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2NhbXBhaWduJyl9KSkKICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCJ3ZWJzb2NrZXQiLCAnT04nKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCJjb25uZWN0ZWQgc3VjY2Vzc2Z1bGx5IikKICAgICAgICAgIAogICAgICB9OwogICAgICAKICAgICAgY29ubmVjdGlvbi5vbm1lc3NhZ2UgPSAobWVzc2FnZSkgPT4gewogICAgICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKG1lc3NhZ2UuZGF0YSk7CiAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgid2Vic29ja2V0IiwgJ09OJyk7CiAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgiZnJvbVdlYnNvY2tldCIsIGRhdGEpOwogICAgICB9OwoKICAgICAgY29ubmVjdGlvbi5vbmNsb3NlID0gKCkgPT4geyAvL2V2ZW50CiAgICAgICAgICBjb25zb2xlLmxvZygiU29ja2V0IGNsb3NlZDogT04gQ0xPU0UiKTsgLy8sIGV2ZW50CiAgICAgICAgICB0aGlzLiRwYXJlbnQuc2hvd2NhbXBhaWduTW9kYWwgPSB0cnVlCiAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgid2Vic29ja2V0IiwgJ09GRicpOwogICAgICB9OwoKICAgICAgY29ubmVjdGlvbi5vbmVycm9yID0gKCkgPT4geyAvL2V2dAogICAgICAgICAgY29uc29sZS5sb2coIlNvY2tldCBjbG9zZWQgOiBPTiBFUlJPUiIpOwogICAgICB9OwogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBzb2NrZXQgKCkgewogICAgICAgIHJldHVybiAgc3RvcmUuc3RhdGUuc29ja2V0CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIHNvY2tldChuZXdWYWx1ZSl7CiAgICAgIGlmKG5ld1ZhbHVlID09ICdPRkYnKXsKICAgICAgICBjb25zb2xlLmxvZygnU29ja2V0IG9mZiEnKQogICAgICAgIHRoaXMud2ViU29ja2V0KCkKICAgICAgICB0cnVlCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;AAOA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nimport store from '@/store'\n\nexport default {\n  name: 'App',\n  created () {\n    this.webSocket()\n  },\n  methods: {\n    webSocket() {\n      let connection = new WebSocket(\"ws://\" + this.$socket +\"/api/v1/ws\")\n\n      console.log(\"Connecting to the websocket server...\")\n\n      if (localStorage.getItem('user') == null || localStorage.getItem('phone') == null) {\n        console.log(\"Username or phone still null,websocket connection failed, no user\");\n        store.dispatch(\"websocket\", 'OFF');\n        return;\n      }\n\n      connection.onopen = () => {\n        \n          connection.send(JSON.stringify({ \"username\": localStorage.getItem('user'), \"phone\": localStorage.getItem('phone') ,\"campaign\": localStorage.getItem('campaign')}))\n          console.log(JSON.stringify(    { \"username\": localStorage.getItem('user'), \"phone\": localStorage.getItem('phone') ,\"campaign\": localStorage.getItem('campaign')}))\n          store.dispatch(\"websocket\", 'ON');\n          console.log(\"connected successfully\")\n          \n      };\n      \n      connection.onmessage = (message) => {\n          let data = JSON.parse(message.data);\n          store.dispatch(\"websocket\", 'ON');\n          store.dispatch(\"fromWebsocket\", data);\n      };\n\n      connection.onclose = () => { //event\n          console.log(\"Socket closed: ON CLOSE\"); //, event\n          this.$parent.showcampaignModal = true\n          store.dispatch(\"websocket\", 'OFF');\n      };\n\n      connection.onerror = () => { //evt\n          console.log(\"Socket closed : ON ERROR\");\n      };\n    },\n  },\n  computed: {\n    socket () {\n        return  store.state.socket\n    },\n  },\n  watch: {\n    socket(newValue){\n      if(newValue == 'OFF'){\n        console.log('Socket off!')\n        this.webSocket()\n        true\n      }\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n"]}]}